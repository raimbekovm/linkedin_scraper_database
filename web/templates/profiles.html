{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª–∏ - LinkedIn Scraper DB{% endblock %}

{% block content %}
<h1 style="margin: 20px 0;">–í—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏ ({{ total_profiles }})</h1>

<div class="card">
    {% for person in profiles %}
    <div class="profile-card">
        <div class="profile-info" style="flex: 1;">
            <h3><a href="/profile/{{ person.id }}" style="color: #0a66c2; text-decoration: none;">{{ person.name }}</a></h3>
            <p><strong>{{ person.current_job_title or '–î–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}</strong> –≤ {{ person.current_company or '–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}</p>
            <p>üìç {{ person.location or '–õ–æ–∫–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}</p>
            <p style="font-size: 12px; color: #999;">
                –û–ø—ã—Ç: {{ person.experiences|length }} –º–µ—Å—Ç |
                –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: {{ person.educations|length }} —É—á–µ–±–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π |
                –°–∫—Ä—ç–π–ø–æ–≤: {{ person.scrape_count }}
            </p>
        </div>
        <div style="display: flex; flex-direction: column; gap: 5px;">
            <a href="/profile/{{ person.id }}" class="btn" style="font-size: 12px; padding: 8px 15px;">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            <a href="{{ person.linkedin_url }}" target="_blank" class="btn btn-secondary" style="font-size: 12px; padding: 8px 15px;">LinkedIn</a>
        </div>
    </div>
    {% endfor %}
</div>

{% if total_pages > 1 %}
<div class="pagination">
    {% if page > 1 %}
    <a href="?page={{ page - 1 }}">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
    {% endif %}

    {% for p in range(1, total_pages + 1) %}
        {% if p == page %}
        <a href="?page={{ p }}" class="active">{{ p }}</a>
        {% elif p <= 3 or p > total_pages - 3 or (p >= page - 1 and p <= page + 1) %}
        <a href="?page={{ p }}">{{ p }}</a>
        {% elif p == 4 or p == total_pages - 3 %}
        <span>...</span>
        {% endif %}
    {% endfor %}

    {% if page < total_pages %}
    <a href="?page={{ page + 1 }}">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}

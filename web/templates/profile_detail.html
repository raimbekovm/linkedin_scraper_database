{% extends "base.html" %}

{% block title %}{{ person.name }} - LinkedIn Scraper DB{% endblock %}

{% block content %}
<div style="margin: 20px 0;">
    <a href="/profiles" style="color: #0a66c2; text-decoration: none;">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
</div>

<div class="card">
    <h1 style="margin-bottom: 10px;">{{ person.name }}</h1>
    <p style="font-size: 18px; color: #666; margin-bottom: 5px;">
        <strong>{{ person.current_job_title or '–î–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}</strong>
    </p>
    <p style="font-size: 16px; color: #666; margin-bottom: 15px;">
        {{ person.current_company or '–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}
    </p>
    <p style="color: #999;">üìç {{ person.location or '–õ–æ–∫–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}</p>

    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
        <p style="font-size: 12px; color: #999;">
            <strong>LinkedIn:</strong> <a href="{{ person.linkedin_url }}" target="_blank">{{ person.linkedin_url }}</a><br>
            <strong>–ü–µ—Ä–≤—ã–π —Å–∫—Ä—ç–π–ø:</strong> {{ person.first_scraped_at.strftime('%d.%m.%Y %H:%M') }}<br>
            <strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–∫—Ä—ç–π–ø:</strong> {{ person.last_scraped_at.strftime('%d.%m.%Y %H:%M') }}<br>
            <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫—Ä—ç–π–ø–æ–≤:</strong> {{ person.scrape_count }}
        </p>
    </div>
</div>

{% if person.about %}
<div class="card">
    <h2>–û —Å–µ–±–µ</h2>
    <p style="white-space: pre-wrap;">{{ person.about }}</p>
</div>
{% endif %}

<div class="card">
    <h2>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã ({{ person.experiences|length }})</h2>
    {% for exp in person.experiences %}
    <div class="list-item">
        <h3 style="margin-bottom: 5px;">{{ exp.position_title }}</h3>
        <p style="color: #666; margin-bottom: 5px;"><strong>{{ exp.company_name }}</strong></p>
        <p style="font-size: 14px; color: #999;">
            {% if exp.from_date and exp.to_date %}
            {{ exp.from_date }} - {{ exp.to_date }}
            {% if exp.duration %} ({{ exp.duration }}){% endif %}
            {% endif %}
            {% if exp.location %} ¬∑ {{ exp.location }}{% endif %}
        </p>
        {% if exp.description %}
        <p style="margin-top: 10px; font-size: 14px;">{{ exp.description }}</p>
        {% endif %}
    </div>
    {% else %}
    <p style="color: #999;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–ø—ã—Ç–µ —Ä–∞–±–æ—Ç—ã</p>
    {% endfor %}
</div>

<div class="card">
    <h2>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ({{ person.educations|length }})</h2>
    {% for edu in person.educations %}
    <div class="list-item">
        <h3 style="margin-bottom: 5px;">{{ edu.institution_name }}</h3>
        {% if edu.degree %}
        <p style="color: #666; margin-bottom: 5px;">{{ edu.degree }}</p>
        {% endif %}
        <p style="font-size: 14px; color: #999;">
            {% if edu.from_date and edu.to_date %}
            {{ edu.from_date }} - {{ edu.to_date }}
            {% endif %}
        </p>
        {% if edu.description %}
        <p style="margin-top: 10px; font-size: 14px;">{{ edu.description }}</p>
        {% endif %}
    </div>
    {% else %}
    <p style="color: #999;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏</p>
    {% endfor %}
</div>

{% if history %}
<div class="card">
    <h2>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h2>
    {% for h in history %}
    <div class="list-item">
        <p><strong>{{ h.changed_field }}</strong> –∏–∑–º–µ–Ω–µ–Ω–æ {{ h.changed_at.strftime('%d.%m.%Y %H:%M') }}</p>
        <p style="font-size: 14px; color: #666;">
            –ë—ã–ª–æ: {{ h.old_value or '–Ω–µ —É–∫–∞–∑–∞–Ω–æ' }}<br>
            –°—Ç–∞–ª–æ: {{ h.new_value or '–Ω–µ —É–∫–∞–∑–∞–Ω–æ' }}
        </p>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
